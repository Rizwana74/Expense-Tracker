<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Xpen Tracker</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- LOGIN PAGE -->
  <div id="login-page" class="page bg-login">
    <div class="card">
      <h1>Xpen Tracker</h1>
      <p class="subtitle">Track smarter. Sleep better. ðŸŒ™</p>

      <input type="email" id="email" placeholder="Email" autocomplete="username">
      <input type="password" id="password" placeholder="Password" autocomplete="current-password">

      <div class="actions">
        <button id="login-btn" class="btn primary">Log in</button>
        <button id="signup-btn" class="btn">Sign up</button>
      </div>
      <div class="divider">or</div>
      <button id="google-login-btn" class="btn google">Continue with Google</button>
      <p id="auth-error" class="error"></p>
    </div>
  </div>

  <!-- MAIN PAGE -->
  <div id="main-page" class="page bg-main hidden">
    <div class="main-wrap">
      <header class="topbar">
        <div class="welcome">
          <h2 id="welcome-message">Welcome!</h2>
          <p class="muted">Happy tracking âœ¨</p>
        </div>
        <button id="logout-btn" class="btn outline">Logout</button>
      </header>

      <section class="panel">
        <h3>Add expense</h3>
        <div class="form-row">
          <input type="number" id="amount" placeholder="Amount" min="0" step="0.01">
          <select id="category">
            <option>Food</option>
            <option>Travel</option>
            <option>Shopping</option>
            <option>Entertainment</option>
            <option>Others</option>
          </select>
          <input type="text" id="note" placeholder="Note (optional)">
          <button id="add-expense-btn" class="btn primary">Add</button>
        </div>
        <p id="data-error" class="error"></p>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h3>Your expenses</h3>
          <div class="chart-controls">
            <label for="chart-type">Chart:</label>
            <select id="chart-type">
              <option value="bar">Bar (by category)</option>
              <option value="line">Line (over time)</option>
            </select>
          </div>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Amount</th>
                <th>Category</th>
                <th>Note</th>
                <th>Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="expense-table"></tbody>
          </table>
        </div>

        <canvas id="expense-chart" height="250"></canvas>

        <!-- Migration / link helper (hidden unless needed) -->
        <div id="merge-helper" style="display:none; margin-top:12px; padding:10px; border:1px dashed #ccc;">
          <p id="merge-msg" style="margin:0 0 8px 0;"></p>
          <div id="merge-actions" style="display:flex; gap:8px;">
            <input id="merge-old-uid" placeholder="Old UID (optional)" style="flex:1; padding:6px;" />
            <button id="merge-copy-btn" class="btn">Copy old data â†’ my account</button>
            <button id="merge-link-btn" class="btn">I have password: Sign-in & link</button>
          </div>
          <p id="merge-status" style="margin-top:8px;color:#b00;"></p>
        </div>
      </section>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- App scripts -->
  <script type="module" src="app.js"></script>
</body>
</html>
